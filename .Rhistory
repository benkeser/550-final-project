),
margin = list(b = 150)  # extra room at bottom for the legend
)
# adjusting where legend will be displayed
viz1 <- viz1 %>% layout(
legend = list(
orientation = "h",
x = 0,
y = -0.55,
font = list(size = 10),
itemwidth = 80
),
margin = list(
l = 60,
r = 20,
t = 60,
b = 260
)
)
# ============================================
# 4. LAYOUT: PLOT LEFT (8 COL) + FILTERS RIGHT (4 COL)
# ============================================
# building out widget to display filters
full_widget <- div(
style = "
display:flex;
gap:40px;
align-items:flex-start;
width:100%;
padding:20px;
",
# left side plot (70% width)
div(
style = "flex: 0 0 70%;",
viz1
),
# Right side: Filters (30% width)
div(
style = "flex: 0 0 30%;",
filters
)
)
# ============================================
# 5. RENDER WIDGET + DEPENDENCIES
# ============================================
# building widget with plot and dependencies
widget_tags <- htmltools::renderTags(full_widget)
viz1_html <- widget_tags$html
viz1_deps <- widget_tags$dependencies
# ============================================
# 6. DASHBOARD HTML TEMPLATE
# ============================================
# building dashboard, other comments will be formatted differently within html to avoid breaking code:
dashboard_html <- paste0('
<html>
<head>
<title>Medication Acceptability, Accessibility, and Safety Dashboard</title>
', htmltools::renderDependencies(viz1_deps), '
</head>
<body>
<h1>Interactive Visualization 1</h1>
<!-- Center the whole area -->
<div style="width:90%; margin:auto; padding:40px 20px;">
', viz1_html, '
<br><br>
<!-- Visualization 2 Placeholder -->
<h2>Visualization 2</h2>
<div style="width:100%;
height:350px;
border:1px dashed #888;
display:flex;
align-items:center;
justify-content:center;">
<p style="color:#555;">Visualization 2 will be inserted here</p>
</div>
<br><br>
<!-- Visualization 3 Placeholder -->
<h2>Visualization 3</h2>
<div style="width:100%;
height:350px;
border:1px dashed #888;
display:flex;
align-items:center;
justify-content:center;">
<p style="color:#555;">Visualization 3 will be inserted here</p>
</div>
</div>
</body>
</html>
')
# ============================================
# 7. SAVE TO HTML FILE
# ============================================
writeLines(dashboard_html, "Medication_dashboard.html")
library(readxl)
library(dplyr)
library(plotly)
library(htmltools)
library(crosstalk)
library(htmlwidgets)
# -----------------------------
# 1. Load dataset and create filters
# -----------------------------
df <- read_excel("Scenario1_PharmaDrugs_dataset.xlsx")
df_sub <- df |>
filter(medical_condition %in% c(
"Diabetes (Type 1)",
"Diabetes (Type 2)",
"Hypertension"))
Shared_df <-sharedData$new(df_sub)
library(readxl)
library(dplyr)
library(plotly)
library(htmltools)
library(crosstalk)
library(htmlwidgets)
# -----------------------------
# 1. Load dataset and create filters
# -----------------------------
df <- read_excel("Scenario1_PharmaDrugs_dataset.xlsx")
df_sub <- df |>
filter(medical_condition %in% c(
"Diabetes (Type 1)",
"Diabetes (Type 2)",
"Hypertension"))
Shared_df <-SharedData$new(df_sub)
filters <-tagList(
div(style = "margin-bottom:20px; width:100%;",
filter_select(
id = "condition",
label = "Filter by Condition:",
sharedData = shared_df,
group = ~medical_condition)),
div(style = "margin-bottom:20px; width:100%;",
filter_select(
id = "drugclass",
label = "Filter by Drug Class:",
sharedData = shared_df,
group = ~drug_classes)))
# -----------------------------
# 2. Interactive Plotly Visualization
# -----------------------------
viz1 <- plot_ly(
shared_df,
x = ~activity,
y = ~rating,
type = "scatter",
mode = "markers",
color = ~drug_classes,
colors = "Set2",
text = ~paste(
"<b>Drug:</b>", drug_name,
"<br><b>Condition:</b>", medical_condition,
"<br><b>Pregnancy Category:</b>", pregnancy_category
),
hoverinfo = "text"
) %>% layout(
title = "Acceptability vs Accessibility",
xaxis = list(title = "Accessibility (Activity Score)"),
yaxis = list(title = "Acceptability (Rating)")
)
legend = list(
orientation = "h",
x = 0,
y = -0.3,
font = list(size =10),
itemwidth = 80
),
# ============================================
# LOAD PACKAGES
# ============================================
library(readxl)
library(dplyr)
library(plotly)
library(htmltools)
library(crosstalk)
library(htmlwidgets)
# ============================================
# 1. LOAD + FILTER DATA
# ============================================
# reading in data
df <- read_excel("Scenario1_PharmaDrugs_dataset.xlsx")
# creating subset of data only containing conditions of interest
df_sub <- df |>
filter(medical_condition %in% c(
"Diabetes (Type 1)",
"Diabetes (Type 2)",
"Hypertension"
))
# creating dataset to use for vis and filters
shared_df <- SharedData$new(df_sub)
# ============================================
# 2. FILTERS (RIGHT SIDE PANEL)
# ============================================
# creating condition and drug class filters
filters <- tagList(
div(style = "margin-bottom:20px; width:100%;",
filter_select(
id = "condition",
label = "Filter by Condition:",
sharedData = shared_df,
group = ~medical_condition
)
),
div(style = "margin-bottom:20px; width:100%;",
filter_select(
id = "drugclass",
label = "Filter by Drug Class:",
sharedData = shared_df,
group = ~drug_classes
)
)
)
# ============================================
# 3. INTERACTIVE PLOT (LEGEND FIXED)
# ============================================
# creating visualization 1 here with hoverbox
viz1 <- plot_ly(
shared_df,
x = ~activity,
y = ~rating,
type = "scatter",
mode = "markers",
color = ~drug_classes,
colors = "Set2",
text = ~paste(
"<b>Drug:</b>", drug_name,
"<br><b>Condition:</b>", medical_condition,
"<br><b>Pregnancy Category:</b>", pregnancy_category
),
hoverinfo = "text"
) %>%
layout(
title = "Acceptability vs Accessibility",
xaxis = list(title = "Accessibility (Activity Score)"),
yaxis = list(title = "Acceptability (Rating)"),
# avoiding legend position overlap with plot
legend = list(
orientation = "h",
x = 0,
y = -0.3,
font = list(size = 10),
itemwidth = 80
),
margin = list(b = 150)  # extra room at bottom for the legend
)
# adjusting where legend will be displayed
viz1 <- viz1 %>% layout(
legend = list(
orientation = "h",
x = 0,
y = -0.55,
font = list(size = 10),
itemwidth = 80
),
margin = list(
l = 60,
r = 20,
t = 60,
b = 260
)
)
# ============================================
# 4. LAYOUT: PLOT LEFT (8 COL) + FILTERS RIGHT (4 COL)
# ============================================
# building out widget to display filters
full_widget <- div(
style = "
display:flex;
gap:40px;
align-items:flex-start;
width:100%;
padding:20px;
",
# left side plot (70% width)
div(
style = "flex: 0 0 70%;",
viz1
),
# Right side: Filters (30% width)
div(
style = "flex: 0 0 30%;",
filters
)
)
# ============================================
# 5. RENDER WIDGET + DEPENDENCIES
# ============================================
# building widget with plot and dependencies
widget_tags <- htmltools::renderTags(full_widget)
viz1_html <- widget_tags$html
viz1_deps <- widget_tags$dependencies
# ============================================
# 6. DASHBOARD HTML TEMPLATE
# ============================================
# building dashboard, other comments will be formatted differently within html to avoid breaking code:
dashboard_html <- paste0('
<html>
<head>
<title>Medication Acceptability, Accessibility, and Safety Dashboard</title>
', htmltools::renderDependencies(viz1_deps), '
</head>
<body>
<h1>Accessibility vs. Acceptibility</h1>
<!-- Center the whole area -->
<div style="width:90%; margin:auto; padding:40px 20px;">
', viz1_html, '
<br><br>
<!-- Visualization 2 Placeholder -->
<h2>Visualization 2</h2>
<div style="width:100%;
height:350px;
border:1px dashed #888;
display:flex;
align-items:center;
justify-content:center;">
<p style="color:#555;">Visualization 2 will be inserted here</p>
</div>
<br><br>
<!-- Visualization 3 Placeholder -->
<h2>Visualization 3</h2>
<div style="width:100%;
height:350px;
border:1px dashed #888;
display:flex;
align-items:center;
justify-content:center;">
<p style="color:#555;">Visualization 3 will be inserted here</p>
</div>
</div>
</body>
</html>
')
# ============================================
# 7. SAVE TO HTML FILE
# ============================================
writeLines(dashboard_html, "Medication_dashboard.html")
# ============================================
# LOAD PACKAGES
# ============================================
library(readxl)
library(dplyr)
library(plotly)
library(htmltools)
library(crosstalk)
library(htmlwidgets)
# ============================================
# 1. LOAD + FILTER DATA
# ============================================
# reading in data
df <- read_excel("Scenario1_PharmaDrugs_dataset.xlsx")
# creating subset of data only containing conditions of interest
df_sub <- df |>
filter(medical_condition %in% c(
"Diabetes (Type 1)",
"Diabetes (Type 2)",
"Hypertension"
))
# creating dataset to use for vis and filters
shared_df <- SharedData$new(df_sub)
# ============================================
# 2. FILTERS (RIGHT SIDE PANEL)
# ============================================
# creating condition and drug class filters
filters <- tagList(
div(style = "margin-bottom:20px; width:100%;",
filter_select(
id = "condition",
label = "Filter by Condition:",
sharedData = shared_df,
group = ~medical_condition
)
),
div(style = "margin-bottom:20px; width:100%;",
filter_select(
id = "drugclass",
label = "Filter by Drug Class:",
sharedData = shared_df,
group = ~drug_classes
)
)
)
# ============================================
# 3. INTERACTIVE PLOT (LEGEND FIXED)
# ============================================
# creating visualization 1 here with hoverbox
viz1 <- plot_ly(
shared_df,
x = ~activity,
y = ~rating,
type = "scatter",
mode = "markers",
color = ~drug_classes,
colors = "Set2",
text = ~paste(
"<b>Drug:</b>", drug_name,
"<br><b>Condition:</b>", medical_condition,
"<br><b>Pregnancy Category:</b>", pregnancy_category
),
hoverinfo = "text"
) %>%
layout(
title = "Acceptability vs Accessibility",
xaxis = list(title = "Accessibility (Activity Score)"),
yaxis = list(title = "Acceptability (Rating)"),
# avoiding legend position overlap with plot
legend = list(
orientation = "h",
x = 0,
y = -0.3,
font = list(size = 10),
itemwidth = 80
),
margin = list(b = 150)  # extra room at bottom for the legend
)
# adjusting where legend will be displayed
viz1 <- viz1 %>% layout(
legend = list(
orientation = "h",
x = 0,
y = -0.55,
font = list(size = 10),
itemwidth = 80
),
margin = list(
l = 60,
r = 20,
t = 60,
b = 260
)
)
# ============================================
# 4. LAYOUT: PLOT LEFT (8 COL) + FILTERS RIGHT (4 COL)
# ============================================
# building out widget to display filters
full_widget <- div(
style = "
display:flex;
gap:40px;
align-items:flex-start;
width:100%;
padding:20px;
",
# left side plot (70% width)
div(
style = "flex: 0 0 70%;",
viz1
),
# Right side: Filters (30% width)
div(
style = "flex: 0 0 30%;",
filters
)
)
# ============================================
# 5. RENDER WIDGET + DEPENDENCIES
# ============================================
# building widget with plot and dependencies
widget_tags <- htmltools::renderTags(full_widget)
viz1_html <- widget_tags$html
viz1_deps <- widget_tags$dependencies
# ============================================
# 6. DASHBOARD HTML TEMPLATE
# ============================================
# building dashboard, other comments will be formatted differently within html to avoid breaking code:
dashboard_html <- paste0('
<html>
<head>
<title>Medication Acceptability, Accessibility, and Safety Dashboard</title>
', htmltools::renderDependencies(viz1_deps), '
</head>
<body>
<h1> Medication Acceptability, Accessibility, and Safety Dashboard</h1>
<!-- Center the whole area -->
<div style="width:90%; margin:auto; padding:40px 20px;">
', viz1_html, '
<br><br>
<!-- Visualization 2 Placeholder -->
<h2>Visualization 2</h2>
<div style="width:100%;
height:350px;
border:1px dashed #888;
display:flex;
align-items:center;
justify-content:center;">
<p style="color:#555;">Visualization 2 will be inserted here</p>
</div>
<br><br>
<!-- Visualization 3 Placeholder -->
<h2>Visualization 3</h2>
<div style="width:100%;
height:350px;
border:1px dashed #888;
display:flex;
align-items:center;
justify-content:center;">
<p style="color:#555;">Visualization 3 will be inserted here</p>
</div>
</div>
</body>
</html>
')
# ============================================
# 7. SAVE TO HTML FILE
# ============================================
writeLines(dashboard_html, "Medication_dashboard.html")
setwd("/Users/julia/DATA 550 Glyph")
install.packages("renv")
renv::init()
renv::activate()
.libPaths()
renv::snapshot()
